<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ajax demo</title>
</head>
<body>
<script src="../dist/fetch.browser.js"></script>
<h3>get</h3>
<button onclick="send_get()">send_get</button>
<button onclick="send_get_noquery()">send_get_noquery</button>
<h3>post</h3>
<button onclick="send_post()">send_post</button>
<button onclick="send_post_noquery()">send_post_noquery</button>
<h3>config</h3>
<button onclick="send_config()">send_config</button>
<h3>FormData</h3>
<button onclick="send_FormData()">send_FormData</button>

<script src="https://cdn.bootcss.com/Mock.js/1.0.1-beta3/mock-min.js"></script>
<script>
  // Mock.setup({
  //   timeout: '1000-1500'
  // })
  // Mock.mock('http://192.168.60.197:8080/htmldemo/phprev/', {
  //   data: {
  //     list: '123'
  //   }
  // })
</script>

<script type="text/javascript">
  console.log(window.fetch)
  fetch.config.baseUrl = 'http://192.168.18.115:8080/'
  fetch.config.timeout = 3000

  fetch.interceptor.success = res => {
    console.log('res', res)
    return res
  }
  fetch.interceptor.fail = err => {
    console.log('err', err)
    return err
  }


  function send_get() {
    fetch.get('htmldemo/phprev/', {name: 'get', tt: '中文'}).then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }

  function send_get_noquery() {
    fetch.get('htmldemo/phprev/').then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }

  function send_post() {
    fetch.post('htmldemo/phprev/', {name: 'post', tt: '中文'}).then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }

  function send_post_noquery() {
    fetch.post('htmldemo/phprev/').then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }


  function send_config() {
    fetch.get('htmldemo/phprev/', {name: 'post', tt: '中文'}, {responseType: ''}).then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }

  function send_FormData() {
    let data = new FormData()
    data.append('name', 'formdata')
    fetch.post('htmldemo/phprev/', data).then(response => {
      console.log(response)
    }).catch(err => {
      console.log(err)
    })
  }
</script>
</body>
</html>